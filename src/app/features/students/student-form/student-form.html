<div class="max-w-4xl mx-auto p-6">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900">
      {{ isEditing() ? 'Edit Student' : 'Add New Student' }}
    </h1>
    <p class="mt-1 text-sm text-gray-600">
      {{ isEditing() ? 'Update student information' : 'Fill in the details to create a new student profile' }}
    </p>
  </div>

  <!-- Form -->
  <div class="bg-white shadow-lg rounded-lg overflow-hidden">
    <form [formGroup]="studentForm" (ngSubmit)="onSubmit()">
      <div class="px-6 py-6 space-y-6">

        <!-- Basic Information -->
        <div>
          <h3 class="text-lg font-medium text-gray-900 mb-4">Basic Information</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- First Name -->
            <div>
              <label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">
                First Name *
              </label>
              <input
                id="firstName"
                type="text"
                formControlName="firstName"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                [class.border-red-500]="firstName?.invalid && firstName?.touched">
              <div *ngIf="firstName?.invalid && firstName?.touched" class="text-red-500 text-xs mt-1">
                First name is required
              </div>
            </div>

            <!-- Last Name -->
            <div>
              <label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">
                Last Name *
              </label>
              <input
                id="lastName"
                type="text"
                formControlName="lastName"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                [class.border-red-500]="lastName?.invalid && lastName?.touched">
              <div *ngIf="lastName?.invalid && lastName?.touched" class="text-red-500 text-xs mt-1">
                Last name is required
              </div>
            </div>

            <!-- Parent -->
            <div>
              <label for="parentId" class="block text-sm font-medium text-gray-700 mb-1">
                Parent *
              </label>
              <select
                id="parentId"
                formControlName="parentId"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                [class.border-red-500]="parentId?.invalid && parentId?.touched">
                <option value="">Select a parent</option>
                <option *ngFor="let parent of parents()" [value]="parent.id">
                  {{ parent.firstName }} {{ parent.lastName }} ({{ parent.email }})
                </option>
              </select>
              <div *ngIf="parentId?.invalid && parentId?.touched" class="text-red-500 text-xs mt-1">
                Please select a parent
              </div>
            </div>

            <!-- Date of Birth -->
            <div>
              <label for="dateOfBirth" class="block text-sm font-medium text-gray-700 mb-1">
                Date of Birth *
              </label>
              <input
                id="dateOfBirth"
                type="date"
                formControlName="dateOfBirth"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                [class.border-red-500]="dateOfBirth?.invalid && dateOfBirth?.touched">
              <div *ngIf="dateOfBirth?.invalid && dateOfBirth?.touched" class="text-red-500 text-xs mt-1">
                Date of birth is required
              </div>
            </div>

            <!-- Academic Level -->
            <div>
              <label for="academicLevel" class="block text-sm font-medium text-gray-700 mb-1">
                Academic Level *
              </label>
              <select
                id="academicLevel"
                formControlName="academicLevel"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                [class.border-red-500]="academicLevel?.invalid && academicLevel?.touched">
                <option value="">Select academic level</option>
                <option value="Grade 1">Grade 1</option>
                <option value="Grade 2">Grade 2</option>
                <option value="Grade 3">Grade 3</option>
                <option value="Grade 4">Grade 4</option>
                <option value="Grade 5">Grade 5</option>
                <option value="Grade 6">Grade 6</option>
                <option value="Grade 7">Grade 7</option>
                <option value="Grade 8">Grade 8</option>
                <option value="Grade 9">Grade 9</option>
                <option value="Grade 10">Grade 10</option>
                <option value="Grade 11">Grade 11</option>
                <option value="Grade 12">Grade 12</option>
              </select>
              <div *ngIf="academicLevel?.invalid && academicLevel?.touched" class="text-red-500 text-xs mt-1">
                Academic level is required
              </div>
            </div>

            <!-- Status -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">
                Status
              </label>
              <div class="flex items-center">
                <input
                  id="isActive"
                  type="checkbox"
                  formControlName="isActive"
                  class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                <label for="isActive" class="ml-2 block text-sm text-gray-900">
                  Active Student
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Contact Information -->
        <div>
          <h3 class="text-lg font-medium text-gray-900 mb-4">Contact Information</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Email -->
            <div>
              <label for="email" class="block text-sm font-medium text-gray-700 mb-1">
                Email Address
              </label>
              <input
                id="email"
                type="email"
                formControlName="email"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                [class.border-red-500]="email?.invalid && email?.touched">
              <div *ngIf="email?.invalid && email?.touched" class="text-red-500 text-xs mt-1">
                Please enter a valid email address
              </div>
            </div>

            <!-- Phone -->
            <div>
              <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">
                Phone Number
              </label>
              <input
                id="phone"
                type="tel"
                formControlName="phone"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
            </div>

            <!-- Address -->
            <div class="md:col-span-2">
              <label for="address" class="block text-sm font-medium text-gray-700 mb-1">
                Address *
              </label>
              <textarea
                id="address"
                formControlName="address"
                rows="3"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                [class.border-red-500]="address?.invalid && address?.touched"></textarea>
              <div *ngIf="address?.invalid && address?.touched" class="text-red-500 text-xs mt-1">
                Address is required
              </div>
            </div>
          </div>
        </div>

        <!-- Emergency Contact -->
        <div formGroupName="emergencyContact">
          <h3 class="text-lg font-medium text-gray-900 mb-4">Emergency Contact</h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Emergency Contact Name -->
            <div>
              <label for="emergencyName" class="block text-sm font-medium text-gray-700 mb-1">
                Contact Name *
              </label>
              <input
                id="emergencyName"
                type="text"
                formControlName="name"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                [class.border-red-500]="emergencyContact?.get('name')?.invalid && emergencyContact?.get('name')?.touched">
              <div *ngIf="emergencyContact?.get('name')?.invalid && emergencyContact?.get('name')?.touched" class="text-red-500 text-xs mt-1">
                Emergency contact name is required
              </div>
            </div>

            <!-- Emergency Contact Phone -->
            <div>
              <label for="emergencyPhone" class="block text-sm font-medium text-gray-700 mb-1">
                Contact Phone *
              </label>
              <input
                id="emergencyPhone"
                type="tel"
                formControlName="phone"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                [class.border-red-500]="emergencyContact?.get('phone')?.invalid && emergencyContact?.get('phone')?.touched">
              <div *ngIf="emergencyContact?.get('phone')?.invalid && emergencyContact?.get('phone')?.touched" class="text-red-500 text-xs mt-1">
                Emergency contact phone is required
              </div>
            </div>

            <!-- Emergency Contact Relationship -->
            <div>
              <label for="emergencyRelationship" class="block text-sm font-medium text-gray-700 mb-1">
                Relationship *
              </label>
              <select
                id="emergencyRelationship"
                formControlName="relationship"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                [class.border-red-500]="emergencyContact?.get('relationship')?.invalid && emergencyContact?.get('relationship')?.touched">
                <option value="">Select relationship</option>
                <option value="Mother">Mother</option>
                <option value="Father">Father</option>
                <option value="Guardian">Guardian</option>
                <option value="Grandparent">Grandparent</option>
                <option value="Aunt">Aunt</option>
                <option value="Uncle">Uncle</option>
                <option value="Other">Other</option>
              </select>
              <div *ngIf="emergencyContact?.get('relationship')?.invalid && emergencyContact?.get('relationship')?.touched" class="text-red-500 text-xs mt-1">
                Relationship is required
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-end space-x-3">
        <button
          type="button"
          (click)="onCancel()"
          class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
          Cancel
        </button>
        <button
          type="submit"
          [disabled]="studentForm.invalid || isLoading()"
          class="px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed">
          <span *ngIf="isLoading()">{{ isEditing() ? 'Updating...' : 'Creating...' }}</span>
          <span *ngIf="!isLoading()">{{ isEditing() ? 'Update Student' : 'Create Student' }}</span>
        </button>
      </div>
    </form>
  </div>
</div>
